<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Signum Romanum</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @font-face {
            font-family: Samian;
            src: url(Samian5-2.32/Samian5-2.32.woff)
        }
        
        .position-input:focus {
            outline: none;
            border-color: #f59e0b;
        }

        .font-samian {
            font-family: Samian;
        }

        .prev-image-container {
          position: relative;
          width: 300px;
          height: 200px;
          background: #f3f4f6 url("img/_placeholder.svg") center / 32px no-repeat;
        }
        
        .prev-image-container img {
          width: 100%;
          height: 100%;
          object-fit: contain;
          display: block;
        }
    </style>
</head>
<body class="min-h-screen bg-gradient-to-br from-amber-50 via-orange-50 to-red-50 p-6">
    <div class="max-w-7xl mx-auto">
        <!-- Header -->
        <div class="bg-white rounded-2xl shadow-xl p-8 mb-8">
            <h1 class="text-4xl font-bold text-gray-800 mb-2">
                üèõÔ∏è Signum Romanum
            </h1>
             <br><p class="text-gray-600">
                Signum Romanum richtet sich direkt an Arch√§ologen, die im Arbeitsalltag auf fragmentierte r√∂mische T√∂pferstempel sto√üen und bisher stundenlang Fachb√ºcher durchsuchen mussten, um diese zu identifizieren. Unsere webbasierte App l√∂st dieses Problem: Durch die Eingabe weniger lesbarer Buchstaben und deren Position liefert ein intelligenter Algorithmus in Sekundenschnelle passende Treffer aus einer eigens aufgebauten Stempeldatenbank ‚Äì ger√§teunabh√§ngig, jederzeit und auch bei unvollst√§ndigen Angaben. Entwickelt wurde die L√∂sung von einem Sch√ºlerforschungsteam aus Dornbirn (Vorarlberg) ‚Äì best√§tigt von allen Experten als erste ihrer Art im Alpenraum.
             </p>
        </div>

        <!-- Suchbereich -->
        <div class="bg-white rounded-2xl shadow-xl p-6 mb-8">
            <i>W√§hle zuerst die Anzahl der Buchstaben und trage bekannte Buchstaben an den entsprechenden Positionen ein, unbekannte Felder bleiben frei oder mit ‚Äû?‚Äú markiert. Die Trefferliste aktualisiert sich automatisch und kann bei Bedarf √ºber ‚ÄûBuchstaben zur√ºcksetzen‚Äú oder ‚ÄûAlle Filter zur√ºcksetzen‚Äú wieder geleert werden. </i>
            <br><br>
            
            <!-- L√§ngenauswahl -->
            <div class="mb-6">
                <label class="block text-sm font-semibold text-gray-700 mb-3">
                    Anzahl der Buchstaben im Stempel:
                </label>
                <input type="range" min="2" max="10" value="7" id="lengthSlider" 
                       class="w-full h-2 bg-amber-200 rounded-lg appearance-none cursor-pointer"
                       onchange="updateLength(this.value)">
                <div class="text-center mt-2">
                    <span class="text-2xl font-bold text-amber-600" id="lengthDisplay">7</span>
                    <span class="text-gray-600 ml-2">Buchstaben</span>
                </div>
            </div>

            <!-- Positionseingabe -->
            <div class="mb-6">
                <label class="block text-sm font-semibold text-gray-700 mb-3">
                    Bekannte Buchstaben an ihren Positionen:
                </label>
                <div class="flex flex-wrap gap-2 justify-center" id="positionInputs">
                    <!-- Wird dynamisch gef√ºllt -->
                </div>
            </div>

            <!-- Reset Buttons -->
            <div class="flex gap-3">
                <button onclick="resetPositions()" class="px-6 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors">
                    Buchstaben zur√ºcksetzen
                </button>
                <button onclick="resetAll()" class="px-6 py-2 bg-red-100 text-red-700 rounded-lg hover:bg-red-200 transition-colors">
                    Alle Filter zur√ºcksetzen
                </button>
            </div>

            <!-- Info -->
            <div class="mt-4 text-sm text-gray-600">
                <span id="resultCount">0 Stempel gefunden</span>
                <span class="text-gray-500 ml-2" id="filterInfo"></span>
            </div>
        </div>

        <!-- Ergebnisse -->
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6" id="results">
            <!-- Wird dynamisch gef√ºllt -->
        </div>

        <!-- Keine Ergebnisse -->
        <div id="noResults" class="bg-white rounded-xl shadow-lg p-12 text-center hidden">
            <p class="text-gray-500 text-lg">
                Keine Stempel gefunden
            </p>
            <p class="text-gray-400 text-sm mt-2">
                Versuche eine andere Kombination oder √§ndere die Filter
            </p>
        </div>
    </div>

    <!-- Modal f√ºr Bildanzeige -->
    <div id="imageModal" class="fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4 hidden" onclick="closeModal()">
        <div class="bg-white rounded-2xl max-w-4xl w-full max-h-[90vh] overflow-auto" onclick="event.stopPropagation()">
            <div class="p-6 border-b border-gray-200">
                <div class="flex justify-between items-center">
                    <div>
                        <h3 class="text-2xl font-bold text-gray-800" id="modalTitle"></h3>
                        <p class="text-gray-600 mt-1" id="modalText"></p>
                        <p class="text-sm text-gray-500 mt-1" id="modalPlate"></p>
                    </div>
                    <button onclick="closeModal()" class="text-gray-500 hover:text-gray-700 text-2xl">
                        ‚úï
                    </button>
                </div>
            </div>
            <div class="p-6">
                <div class="bg-gray-50 rounded-lg p-8 text-center">
                    <img id="modalImage" class="mx-auto max-h-96 hidden" />
                    <div id="modalPlaceholder">
                        <svg class="w-16 h-16 mx-auto text-gray-300 mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z" />
                        </svg>
                        <p class="text-gray-600 mb-2">Stempelbild</p>
                        <p class="text-sm text-gray-500">(Bild derzeit aus urheberrechtlichen Gr&uuml;nden nicht verf&uuml;gbar)</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!--<script src="stamps.js"></script>-->
    <script>     
        const stamps = [
            { id: 'A1', text: 'OFABITI'},
            { id: 'A2', text: '<O>FABITI'},
            { id: 'A3', text: 'OFABITI'},
            { id: 'A4', text: 'OFABIT'},
            { id: 'A5', text: 'ABITIOF'},
            { id: 'A6', text: '<A>BITVS.F<EC>'},
            { id: 'A7', text: 'H.AB.ITVS'},
            { id: 'A8', text: 'FABIII'},
            { id: 'A9', text: 'OFIC.ACVTI'},
            { id: 'A10', text: 'OFIC.ACVTI'},
            { id: 'A11', text: 'OFIC.ACVTI' },
            { id: 'A12', text: 'OF.ACVTI' },
            { id: 'A13', text: 'OF.ACV' },
            { id: 'A14', text: 'AC.BT.I:M' },
            { id: 'A15', text: 'ACVTVS' },
            { id: 'A16', text: 'ACTVS' },
            { id: 'A17', text: 'ACVTV' },
            { id: 'A18', text: 'ACVTV' },
            { id: 'A19', text: 'ADIVTORF' },
            { id: 'A20', text: 'OFIVLIAE[M]' },
            { id: 'A21', text: 'AEMIL<I>' },
            { id: 'A22', text: 'AEMILI' },
            { id: 'A23', text: 'AGEDILVF' },
            { id: 'A24', text: 'OFALBANI' },
            { id: 'A25', text: 'OFALBANI' },
            { id: 'A26', text: 'OFALBAN' },
            { id: 'A27', text: 'C.VAL.ALBAN' },
            { id: 'A28', text: 'GVAL.ALB' },
            { id: 'A29', text: 'OF.ALBIN[I]' },
            { id: 'A30', text: 'OF.ALBINI' },
            { id: 'A31', text: 'OF.ALBIN' },
            { id: 'A32', text: 'ALBINI' },
            { id: 'A33', text: '[A]BLINI' },
            { id: 'A34', text: 'ALBIN' },
            { id: 'A35', text: 'CEX.AL[BINI]' },
            { id: 'A36', text: 'OFALBI' },
            { id: 'A37', text: 'ALBVS.FE' },
            { id: 'A37*', text: 'ALIVS.FI' },
            { id: 'A38', text: 'ALBVSFE' },
            { id: 'A39', text: 'ALBI.FI' },
            { id: 'A40', text: 'ALBVS' },
            { id: 'A41', text: 'AL.BI' },
            { id: 'A42', text: 'ALB' },
            { id: 'A43', text: 'AM ANDIMA' },
            { id: 'A44', text: 'AMANDI' },
            { id: 'A45', text: 'AMARI' },
            { id: 'A46', text: '[A]NE XTLAT' },
            { id: 'A47', text: 'ANTEROSF' },
            { id: 'A48', text: 'ANT EROS' },
            { id: 'A49', text: 'OFAPRIS' },
            { id: 'A50', text: 'OFAPRI' },
            { id: 'A51', text: 'APRONIF' },
            { id: 'A52', text: 'OFAPRO' },
            { id: 'A53', text: 'OFAPRO' },
            { id: 'A54', text: 'APTI' },
            { id: 'A55', text: 'OF.AQVITANI' },
            { id: 'A56', text: 'OFAQVITANI' },
            { id: 'A56*', text: 'OFAQVITAN<I>' },
            { id: 'B1', text: 'BALBVS.F'},
            { id: 'B2', text: 'OFBA[SSINI]'},
            { id: 'B3', text: 'OFBASSIN'},
            { id: 'B4', text: 'OFBMSIN'},
            { id: 'B5', text: 'OF.BASSI'},
            { id: 'B6', text: 'OF.BASSI'},
            { id: 'B7', text: 'OF.BASSI'},
            { id: 'B8', text: 'OF.B[ASSI]'},
            { id: 'B9', text: 'OF.BASSI'},
            { id: 'B10', text: 'OFBASSI'},
            { id: 'B11', text: 'OFBASSL'},
            { id: 'B12', text: 'OFBASSI'},
            { id: 'B13', text: 'OF[F]ASSI'},
            { id: 'B14', text: 'OFBASSI'},
            { id: 'B15', text: 'OFBASSI'},
            { id: 'B16', text: 'OFBASI'},
            { id: 'B17', text: 'OFBASI'},
            { id: 'B18', text: 'OFBASI'},
            { id: 'B19', text: 'OFBASS'},
            { id: 'B20', text: 'OFBASS'},
            { id: 'B21', text: 'OFBASS'},
            { id: 'B22', text: 'OFBAS'},
            { id: 'B23', text: 'OFBAS'},
            { id: 'B24', text: 'BASSLOF'},
            { id: 'B24*', text: 'BASSL<OF>'},
            { id: 'B25', text: 'BASSIO'},
            { id: 'B26', text: 'BASSIO'},
            { id: 'B27', text: 'BASSVS'},
            { id: 'B28', text: 'BASSVS'},
            { id: 'B29', text: 'BASSI'},
            { id: 'B30', text: 'BASSI'},
            { id: 'B31', text: 'BASSI'},
            { id: 'B32', text: 'BASSI'},
            { id: 'B33', text: 'BASSI'},
            { id: 'B34', text: 'BASSI'},
            { id: 'B35', text: 'BASSI'},
            { id: 'B36', text: 'BASSI'},
            { id: 'B37', text: 'BASS[I]'},
            { id: 'B38', text: 'BASSI'},
            { id: 'B39', text: 'BSS[I]A' },
            { id: 'B40', text: 'BASSI' },
            { id: 'B41', text: 'BASSI' },
            { id: 'B42', text: 'BASSI' },
            { id: 'B43', text: 'BAS' },
            { id: 'B44', text: 'BAS' },
            { id: 'B45', text: 'OFBASSICOELI' },
            { id: 'B46', text: 'OFBASSI.CO' },
            { id: 'B47', text: 'OFBASSI.CO' },
            { id: 'B48', text: 'OFBASSICO' },
            { id: 'B49', text: 'OFBASSIC' },
            { id: 'C41', text: 'OFCALV'},
            { id: 'C42', text: 'FCALV'},
            { id: 'C43', text: 'OFCAL'},
            { id: 'C44', text: 'OFCAL'},
            { id: 'C45', text: 'OFCAL'},
            { id: 'C46', text: 'CALVI'},
            { id: 'C47', text: 'CALVI'},
            { id: 'C48', text: 'CALVI'},
            { id: 'C49', text: 'CALVI'},
            { id: 'C50', text: 'CAMI'},
            { id: 'C51', text: 'OFIC.CANTI'},
            { id: 'C52', text: 'OFICC.ANI'},
            { id: 'C53', text: 'OFIC.CANITIJ'},
            { id: 'C54', text: 'OFIC.CANT' },
            { id: 'C55', text: 'OFI.CANTI.' },
            { id: 'C56', text: 'OFI.CANTI' },
            { id: 'C57', text: 'OFI.CANI' },
            { id: 'C58', text: 'OFI.CANT' },
            { id: 'C59', text: 'OFCANTI' },
            { id: 'C60', text: 'CAPITOF' },
            { id: 'C61', text: 'CAPIIO' },
            { id: 'C62', text: 'CAPITOVA' },
            { id: 'C63', text: 'OF.C.ARAN' },
            { id: 'C64', text: 'CARANTIM' },
            { id: 'C65', text: 'CA[RANT]F' },
            { id: 'C66', text: 'CARBONISMA' },
            { id: 'C67', text: 'CARBO' },
            { id: 'C68', text: 'CARILLFE' },
            { id: 'C70', text: 'CARVS.FE' },
            { id: 'C71', text: 'CARVSF' },
            { id: 'C72', text: 'OFCASTI' },
            { id: 'C73', text: 'OFCAS[TI]' },
            { id: 'C74', text: 'OFCASTI' },
            { id: 'C75', text: 'OFCAST' },
            { id: 'C76', text: 'OFCAST' },
            { id: 'C77', text: 'OFCAS' },
            { id: 'C78', text: 'OFCAS' },
            { id: 'C79', text: 'CASTVS.FE' },
            { id: 'C80', text: 'CASTV' },
            { id: 'C81', text: 'CASSTI' },
            { id: 'C81*', text: 'CASST<I>' },
            { id: 'C82', text: '[F:C.]A.S' },
            { id: 'C83', text: 'CASTI' },
            { id: 'C84', text: 'CATLI.OFIC' },
            { id: 'C85', text: 'OFCELADI>' },
            { id: 'C86', text: 'OFCELADI' },
            { id: 'C87', text: 'CELADVSF' },
            { id: 'C88', text: 'CELAD.FE' },
            { id: 'C89', text: 'CELADI.MAN' },
            { id: 'C90', text: 'CELADIM' },
            { id: 'C91', text: 'CIILADVS' },
            { id: 'C92', text: 'CELAD' },
            { id: 'C93', text: 'OF.C.EL.FISI' },
            { id: 'C94', text: 'CEL[ERFEC]' },
            { id: 'C95', text: 'CELEREE' },
            { id: 'C96', text: 'CELE[ROS]' },
            { id: 'C97', text: 'OFCICELRS' },
            { id: 'C98', text: 'OF.CE[LSI]' },
            { id: 'C99', text: 'OFCE' },
            { id: 'C100', text: '[C]ELSIOF' },
            { id: 'C101', text: 'CELSIO' },
            { id: 'C102', text: 'CELSI[.F]' },
            { id: 'C103', text: 'CELSI' },
            { id: 'C104', text: 'OFCELSI' },
            { id: 'C105', text: 'OFCELSI' },
            { id: 'C106', text: 'CELACELSID' },
            { id: 'C107', text: 'CEL[SI]' },
            { id: 'C108', text: 'L.C.CEL.SI.OF' },
            { id: 'C109', text: '[L.C.CELS]I:OF' },
            { id: 'C110', text: 'L.C.C.ELSI.O' },
            { id: 'C111', text: 'L.C.CELS[I]' },
            { id: 'C112', text: 'OFC.N.CELSI' },
            { id: 'C113', text: 'OF.C.N.CEL' },
            { id: 'C114', text: 'OFC.N.CEL' },
            { id: 'C115', text: '[C]ENN[A]TVS' },
            { id: 'C116', text: 'CENNATI' }, 
            { id: 'C117', text: 'OFCENSO' },
            { id: 'C118', text: 'OFCENS' },
            { id: 'C118*', text: 'OFCHNI&bsol;' },
            { id: 'C119', text: 'OFCENS' },
            { id: 'C120', text: 'OFC[E]NS' },
            { id: 'C120*', text: 'OFCE<NS>' },
            { id: 'C121', text: 'OFC.ENS' },
            { id: 'C122', text: 'OF.C,EN' },
            { id: 'C123', text: 'OF.CEN' },
            { id: 'C123*', text: 'OF.CE<N>' },
            { id: 'C124', text: 'OF.CEN' },
            { id: 'C125', text: 'OFCEN' },
            { id: 'C126', text: 'OFCEN' },
            { id: 'C127', text: 'OFCIIN' },
            { id: 'C128', text: 'CIIN.SO' },
            { id: 'C129', text: 'CIRRATI' },
            { id: 'C130', text: 'CITVR' }, 
            { id: 'C131', text: 'G.IV[L.CLE.]' },
            { id: 'C132', text: 'OFCOCI' },
            { id: 'C133', text: 'OFCOCI' },
            { id: 'C134', text: 'OFCOCI' },
            { id: 'C135', text: 'COCIOF' },
            { id: 'C136', text: 'COCVS' },
            { id: 'C137', text: 'COCVS' },
            { id: 'C138', text: 'COCVS' },
            { id: 'C139', text: 'COCV' },
            { id: 'C140', text: 'COCI' },
            { id: 'C141', text: 'OFCOELI' },
            { id: 'C142', text: 'C.OM' },
            { id: 'C143', text: 'C.OM' },
            { id: 'C144', text: 'CORII' },
            { id: 'C145', text: 'COSOI' },
            { id: 'C146', text: 'COSO' },
            { id: 'C147', text: 'OFCOTTO' },
            { id: 'C148', text: 'OFCOTOI' },
            { id: 'C149', text: 'COTTOF' },
            { id: 'C150', text: 'COTTO' },
            { id: 'C151', text: 'COTTON' },
            { id: 'C152', text: 'COTON' },
            { id: 'C153', text: 'C.OTV' },
            { id: 'C154', text: 'COTV' },
            { id: 'C155', text: 'CRA' },
            { id: 'C156', text: 'OF.CRESTIO' },
            { id: 'C157', text: 'OFCRESTIO' },
            { id: 'C158', text: 'OFCRSTIO' },
            { id: 'C159', text: 'OF.C.RESTI' },
            { id: 'C160', text: 'OFCRESTI' },
            { id: 'C160*', text: '<O>FCREST<I>' },
            { id: 'C161', text: 'OFCR[ESTI]' },
            { id: 'C162', text: 'OFCRESTI' },
            { id: 'C163', text: 'OFCREST' },
            { id: 'C164', text: 'OFCRES<T>' },
            { id: 'C165', text: 'OF.CRES' },
            { id: 'C165*', text: 'OF.CRE<S>' },
            { id: 'C166', text: 'OFC[RES]' },
            { id: 'C167', text: 'OF.CRE' },
            { id: 'C168', text: 'OFCRE' },
            { id: 'C169', text: 'CRESTIO' },
            { id: 'C170', text: 'CRESTI' },
            { id: 'C171', text: 'CRESTI' },
            { id: 'C172', text: '[C]REST[I]' },
            { id: 'C173', text: 'CRIIS' },
            { id: 'C174', text: 'CRICIROF' },
            { id: 'C175', text: 'CRISPI.MA' },
            { id: 'C175*', text: '<C>RISPI.MA' },
            { id: 'C176', text: 'CRIS[PI]' },
            { id: 'C177', text: 'CRISPVSX' },
            { id: 'C178', text: 'CRVCVRO' },
            { id: 'C179', text: 'CRVCVR' },
            { id: 'C180', text: 'CRVCI' },
            { id: 'C10', text: 'ALVINI' },
            { id: 'C11', text: 'AQVITANI' },
            { id: 'C12', text: 'OFCAL' },
            { id: 'C13', text: 'OFCALVI' },
            { id: 'C14', text: 'OFCALVI' },
            { id: 'C15', text: 'OFCALVI' },
            { id: 'C16', text: 'OFCALVI' },
            { id: 'C17', text: 'OFCALVI' },
            { id: 'C18', text: 'OFCALVI' },
            { id: 'C19', text: 'OFCALVI' },
            { id: 'C20', text: 'OF'},
            { id: 'C21', text: 'OFCALVI' },
            { id: 'C38', text: 'OF'},  
            { id: 'D7', text: 'DAM'},  
            { id: 'D8', text: 'DARIB[ITVS]'},  
            { id: 'D9', text: 'DARIBITVS'},  
            { id: 'D10', text: 'DARRAFEC'},
            { id: 'D11', text: 'DARRA.FE'},
            { id: 'D11*', text: 'DARRA.F<E>'},
            { id: 'D12', text: 'DARRAFE'},
            { id: 'D13', text: 'DARRAF'},
            { id: 'D14', text: 'DARRA[---]'},
            { id: 'D15', text: 'DIINTO'},
            { id: 'D16', text: 'DIOCARI'},
            { id: 'D17', text: '[DI]OGEN'},
            { id: 'D18', text: 'DIORIF'},
            { id: 'D19', text: 'DONATVS.FE'},
            { id: 'D20', text: 'DONATVS.E'},
            { id: 'D21', text: 'DONATS'},
            { id: 'D22', text: 'DONTIOIIICI'},
            { id: 'D23', text: 'DVBITATI'},
            { id: 'E2', text: 'EPIDIVS'},
            { id: 'F1', text: 'FABVS.FE'},
            { id: 'F1*', text: '<F>ABVS<.>F<E>'},
            { id: 'F2', text: 'OF.L.FABI[V]'},
            { id: 'F3', text: 'FASTVS'},
            { id: 'F4', text: 'FEDOTVSFE'},
            { id: 'F5', text: 'FELLT[E]'},
            { id: 'F6', text: 'FELICION[S]'},
            { id: 'F7', text: 'FELICIT[---]'},
            { id: 'F8', text: 'OFFELICIS'},
            { id: 'F9', text: '<OF>FELIC<I>'},
            { id: 'F10', text: 'OF.FELIC<I>'},
            { id: 'F11', text: 'OFFELIC'},
            { id: 'F12', text: 'FELICISD'},
            { id: 'F13', text: '[FELIXS.F]EC.'},
            { id: 'F14', text: 'FELIX.FEC'},
            { id: 'G1', text: 'GALBINIM' },
            { id: 'G2', text: 'OFGALIC' },
            { id: 'G3', text: '[G]ALLICANI.MA' },
            { id: 'G4', text: 'GALLICA:MA' },
            { id: 'G5', text: 'GAL[ICANI]' },
            { id: 'G6', text: 'ALL[IC]AN' },
            { id: 'G7', text: 'GALLI.MANVS' },
            { id: 'G8', text: 'GALLIMA' },
            { id: 'G9', text: 'GALLI' },
            { id: 'G10', text: 'GEMINV' },
            { id: 'G11', text: 'OFGEM.MAE' },
            { id: 'G12', text: 'CLGEMMA' },
            { id: 'G13', text: 'GEMAE' },
            { id: 'G14', text: 'C.GEMM' },
            { id: 'G15', text: 'GENALISF' },
            { id: 'G16', text: '[O]FGERMA' },
            { id: 'G17', text: '<GER>MANIOF' },
            { id: 'G18', text: 'GERMANIOI' },
            { id: 'G19', text: 'GERMANIOI' },
            { id: 'G20', text: 'GERMINI<OF>' },
            { id: 'G21', text: 'GERMANI.FI' },
            { id: 'F15', text: 'FELIXFIC' },
            { id: 'F16', text: 'FELIXF' },
            { id: 'F17', text: 'FELICIS.MAN' },
            { id: 'F18', text: 'FELICISMAN' },
            { id: 'F19', text: 'FELICISMA' },
            { id: 'F20', text: 'FELICISM' },
            { id: 'F21', text: 'FIILIX' },
            { id: 'F22', text: 'FIILIX' },
            { id: 'F23', text: 'FIILIX' },
            { id: 'F24', text: 'FELICIS' },
            { id: 'F25', text: 'FIILI.XSI' },
            { id: 'F26', text: 'FELIXSEV' },
            { id: 'F27', text: 'L.AC.FIC' },
            { id: 'F28', text: 'OFI.FIRM' },
            { id: 'F29', text: 'OF.FIRMO' },
            { id: 'F30', text: 'OFFIRMO' },
            { id: 'F31', text: 'OF.FI' },
            { id: 'F32', text: 'OFIRM' },
            { id: 'F33', text: 'FIRMO' },
            { id: 'F34', text: 'FIRMO' },
            { id: 'F35', text: 'FIRMO' },
            { id: 'F36', text: 'O.FIRMONIS' },
            { id: 'F36*', text: '<O.>FIRMONI<S>' },
            { id: 'F37', text: 'FLORI[MAN]' },
            { id: 'F38', text: 'FLORVS' },
            { id: 'F39', text: 'FORMOSVS' },
            { id: 'F40', text: '[OFF]RONTINI' },
            { id: 'F41', text: 'OFFRONTINI' },
            { id: 'F42', text: 'OFFR.NTNI' },
            { id: 'F43', text: 'OFFRONTINI' },
            { id: 'F44', text: 'OFFRONTIN' },
            { id: 'F45', text: 'OFFRONTIN' },
            { id: 'F46', text: 'O<F>FRON<II>' },
            { id: 'F47', text: 'OFFRONII' },
            { id: 'F48', text: '[O]FRONTI' },
            { id: 'F49', text: 'OFFRON' },
            { id: 'F50', text: 'OFRONTI' },
            { id: 'F51', text: 'OFR.N' },
            { id: 'F52', text: 'FRONTI' },
            { id: 'F53', text: '[F]RON' },
            { id: 'F54', text: 'FRONTOF' },
            { id: 'F55', text: 'FRONTO' },
            { id: 'F56', text: 'FVSCI' },
            { id: 'F57', text: 'OFFVSCI' },
            { id: 'F58', text: '[OF].FVSC' },
            { id: 'F59', text: 'OF.FVS' },
            { id: 'F60', text: 'FVSCI' },
            { id: 'F61', text: 'FVSCI' },
            { id: 'F62', text: 'FVSCI' },
            { id: 'F63', text: 'F[VSC]I' },
            { id: 'F64', text: 'FVSCI' },
            { id: 'F65', text: 'FVSCI' },
            { id: 'F66', text: 'FVSCI' },
            { id: 'F67', text: 'FVS[CI]' },
            { id: 'F68', text: 'FVSC' },
            { id: 'F69', text: 'FVSC' },
            { id: 'G1', text: 'GALBINIM' },
            { id: 'G2', text: 'OFGALIC' },
            { id: 'G3', text: '[G]ALLICANI.MA' },
            { id: 'G4', text: 'GALLICA.MA' },
            { id: 'G5', text: 'GALI[ICANI]' },
            { id: 'G6', text: 'ALL[IC]AN' },
            { id: 'G7', text: 'GALLI.MANVS' },
            { id: 'G8', text: 'GALLIMA' },
            { id: 'G9', text: 'GALLI' },
            { id: 'G10', text: 'GEMINV' },
            { id: 'G11', text: 'OFGEM.MAE' },
            { id: 'G12', text: 'CLGEMMA' },
            { id: 'G13', text: 'GEMAE' },
            { id: 'G14', text: 'C.GEMM' },
            { id: 'G15', text: 'GENALISF' },
            { id: 'G16', text: '[O]FGERMA' },
            { id: 'G17', text: '<GER>MANIOF' },
            { id: 'G18', text: 'GERMANIOI' },
            { id: 'G19', text: 'GERMANIOI' },
            { id: 'G20', text: 'GERMNI<OF>' },
            { id: 'G21', text: 'GERMANI.FI' },
            { id: 'G22', text: '[GER]MANI<.F>' },
            { id: 'G23', text: 'GERF' },
            { id: 'G24', text: 'G.ERMANI' },
            { id: 'G25', text: 'GERMANI' },
            { id: 'G26', text: 'GERMA[NI]' },
            { id: 'G27', text: 'GER[MNI]' },
            { id: 'G28', text: 'CERMAIN' },
            { id: 'G29', text: 'GERMANI' },
            { id: 'G30', text: 'CERMAN' },
            { id: 'G31', text: 'GERMA<N>' },
            { id: 'G32', text: 'CERMAN' },
            { id: 'G33', text: '[G]ERMAN' },
            { id: 'G34', text: 'GERMA' },
            { id: 'G35', text: 'GERMA' },
            { id: 'G36', text: 'OIIGER' },
            { id: 'G37', text: 'OFFLAVI.GER.' },
            { id: 'G38', text: '<O>FFLAGER.' },
            { id: 'G39', text: 'OF.FL.GER.' },
            { id: 'G40', text: 'OFFL.CER' },
            { id: 'G41', text: 'OFFLGER' },
            { id: 'G42', text: 'OFFLGER' },
            { id: 'G43', text: 'OF.F.GE[R.]' },
            { id: 'G44', text: 'OFFGER' },
            { id: 'G45', text: 'OFFCER' },
            { id: 'G46', text: 'OFFGER.' },
            { id: 'G47', text: 'OFFC.ER' },
            { id: 'G48', text: 'OFFGER' },
            { id: 'G49', text: 'OFFCER' },
            { id: 'G50', text: 'OFFCEK' },
            { id: 'G51', text: 'OFFCE' },
            { id: 'H1', text: 'Q.IVL.HABI' },
            { id: 'I1', text: '<O>FFIC.INGEN' },
            { id: 'I2', text: 'OF.INGEN' },
            { id: 'I3', text: 'OF.INGEN' },
            { id: 'I4', text: 'OFINC.I' },
            { id: 'I5', text: 'OFINC.I' },
            { id: 'I6', text: 'OFINC' },
            { id: 'I7', text: 'INGENVI.F' },
            { id: 'I8', text: '[IN]GENVI' },
            { id: 'I9', text: 'INGENVI' },
            { id: 'I9*', text: '<I>NGEN<VI>' },
            { id: 'I9**', text: '<I>NGE<NVI>' },
            { id: 'I10', text: 'OFIVCVNDI' },
            { id: 'I11', text: 'OFIVCVNDI' },
            { id: 'I12', text: 'OF.[IV]CVN' },
            { id: 'I13', text: 'OF.IVCVN' },
            { id: 'I14', text: 'OF.IVCVN' },
            { id: 'I15', text: 'OF.IVCVN' },
            { id: 'I16', text: 'OF.IVCVN' },
            { id: 'I17', text: 'IVCVNDVS' },
            { id: 'I18', text: '[I]VCVNDV' },
            { id: 'I19', text: 'IVCVND[I]' },
            { id: 'I20', text: 'IVC.VND' },
            { id: 'I21', text: '[I]VCVND' },
            { id: 'I22', text: 'IVCVND' },
            { id: 'I23', text: 'OFCO.IV<C>' },
            { id: 'I24', text: 'OF.COIV' },
            { id: 'I25', text: 'FCO.IV' },
            { id: 'I26', text: 'ICOIV' },
            { id: 'I27', text: 'SEX.IVL.IVCVND' },
            { id: 'I28', text: 'OFIC.IVLI' },
            { id: 'I29', text: ':OFIVI:' },
            { id: 'I30', text: 'IVLI.' },
            { id: 'I31', text: 'IVLLINI' },
            { id: 'I32', text: 'IVLLINI' },
            { id: 'I33', text: 'IVLLINI' },
            { id: 'I34', text: 'IVLLIN' },
            { id: 'I35', text: 'IVLLN' },
            { id: 'I36', text: 'IVNII[I]' },
            { id: 'I37', text: 'IVNII' },
            { id: 'I38', text: 'I.VN' },
            { id: 'I39', text: 'OFIVSTI' },
            { id: 'I40', text: 'OFI.VST' },
            { id: 'I41', text: 'OF.IVS.' },
            { id: 'I42', text: 'IVSTI.OF' },
            { id: 'I43', text: 'IVSTI.OF' },
            { id: 'I44', text: 'IVSTID' },
            { id: 'I45', text: 'IVSTI' },
            { id: 'I46', text: '<I>VENALISMA' },
            { id: 'L1', text: 'OF.LABIONIS' },
            { id: 'L2', text: 'OF.L[ABIO]' },
            { id: 'L3', text: 'OF.LABE' },
            { id: 'L3*', text: 'OF.LAB<E>' },
            { id: 'L3**', text: 'OF.LAB<E>' },
            { id: 'L4', text: '=.LAB' },
            { id: 'L5', text: 'LABIO' },
            { id: 'L6', text: 'LARTIVS.' },
            { id: 'L7', text: 'LAVRATVS' },
            { id: 'L8', text: 'LAVR.I:O' },
            { id: 'L9', text: 'LEGITVM.O' },
            { id: 'L10', text: 'LENTVF' },
            { id: 'L11', text: 'OFL.IIPI' },
            { id: 'L12', text: 'LIBERTVS' },
            { id: 'L13', text: '<L>IBERTVS' },
            { id: 'L14', text: 'OFLICIN' },
            { id: 'L15', text: 'OFLICN' },
            { id: 'L16', text: 'LICINIANAO' },
            { id: 'L17', text: 'LICINIANAO' },
            { id: 'L18', text: '<L>IC.INIANA<O>' },
            { id: 'L19', text: '<L>CNIANA<O>' },
            { id: 'L20', text: 'LICINVS' },
            { id: 'L21', text: 'L.ICN.VS' },
            { id: 'L22', text: 'LIC.IA' },
            { id: 'L23', text: 'LOGIRNM' },
            { id: 'L24', text: 'LOCIRNVS' },
            { id: 'L25', text: 'LOGIRNI' },
            { id: 'L26', text: '<L>OGIRN' },
            { id: 'L27', text: 'LORI.R' },
            { id: 'L28', text: 'OF.LVCCEI' },
            { id: 'L29', text: 'OF.LVCCEI' },
            { id: 'L30', text: 'OFLVCCEI' },
            { id: 'L31', text: 'OF.LVCCE' },
            { id: 'L32', text: 'OF.LVCC' },
            { id: 'L33', text: 'OF.LVCC' },
            { id: 'L34', text: 'LVC[IVS]' },
            { id: 'L34*', text: 'LVCIVS' },
            { id: 'L35', text: 'LVPERCV.FE' },
            { id: 'L36', text: 'LVPP[A.F]' },
            { id: 'L37', text: 'LVPIMA' },
            { id: 'L38', text: 'LVPVS' },
            { id: 'M1', text: 'OFICMACCAR[I]' },
            { id: 'M2', text: 'OFI.MACCA' },
            { id: 'M3', text: 'OF.MACCAR' },
            { id: 'M4', text: 'OF.MACC[AR]' },
            { id: 'M4*', text: '<O>F.MACCA<R>' },
            { id: 'M5', text: 'OF.MACCAR' },
            { id: 'M7', text: 'OF.MACA' },
            { id: 'M8', text: 'MACCARI' },
            { id: 'M9', text: 'MACCARI' },
            { id: 'M10', text: 'MACCA' },
            { id: 'M11', text: 'MACA' },
            { id: 'M12', text: 'MAC' },
            { id: 'M13', text: 'MAC.RI.MAN' },
            { id: 'M14', text: 'MA.AC.II.R' },
            { id: 'M15', text: 'MAC[ER]' },
            { id: 'M16', text: 'MACIR' },
            { id: 'M17', text: 'MACRIN' },
            { id: 'M18', text: 'MAG[N]IMA' },
            { id: 'M19', text: 'MANDVILMA' },
            { id: 'M20', text: 'MANDOF' },
            { id: 'M21', text: '[MAN]DV.' },
            { id: 'M22', text: 'OFMANSVE' },
            { id: 'M23', text: 'OFMASV' },
            { id: 'M24', text: 'MAPONI' },
            { id: 'M25', text: 'MARINVS.FE' },
            { id: 'M26', text: 'MARINI' },
            { id: 'M27', text: 'MARINI' },
            { id: 'M28', text: '[MA]RSI' },
            { id: 'M29', text: 'MARS' },
            { id: 'M30', text: 'MARS' },
            { id: 'M31', text: 'MARTIA[LISFE]' },
            { id: 'M32', text: 'MARTIALIS.VA' },
            { id: 'M33', text: 'OFMASCLIN' },
            { id: 'M34', text: 'MSCLINI' },
            { id: 'M35', text: '[OF.]MASCLI' },
            { id: 'M36', text: 'OFMASC[L]' },
            { id: 'M37', text: 'OFMASO' },
            { id: 'M38', text: 'OFMASCI' },
            { id: 'M39', text: 'MASCLVS[.FE]' },
            { id: 'M40', text: 'MASCVLVS' },
            { id: 'M41', text: 'MASCLVS' },
            { id: 'M42', text: 'MASCVL<I>' },
            { id: 'M43', text: 'MASCLI' },
            { id: 'M44', text: 'MASCLI' },
            { id: 'M45', text: 'MASCL' },
            { id: 'M46', text: 'MASCL' },
            { id: 'M47', text: 'MASCLI.BAL BVS' },
            { id: 'M48', text: 'OFMASC[VL]' },
            { id: 'M49', text: 'OFMASCVL' },
            { id: 'M50', text: 'OFMASCL' },
            { id: 'M51', text: '<OF>MASCL' },
            { id: 'M52', text: 'OFMASC.' },
            { id: 'M53', text: 'OFMASC' },
            { id: 'M54', text: 'OFMAS' },
            { id: 'M55', text: 'OFMATE' },
            { id: 'M56', text: 'OF.MAT.VGE' },
            { id: 'M57', text: 'OFMATV' },
            { id: 'M58', text: 'MEOILLVS' },
        ];

        let currentLength = 7;
        let positions = Array(10).fill("");
        let frameFilter = 'alle';
        let stampImages = {};

        // Initialisierung
        function init() {
            updatePositionInputs();
            filterStamps();
        }

        // L√§nge aktualisieren
        function updateLength(value) {
            currentLength = parseInt(value);
            document.getElementById('lengthDisplay').textContent = currentLength;
            positions = Array(10).fill("");
            updatePositionInputs();
            filterStamps();
        }

        // Positionseingaben erstellen
        function updatePositionInputs() {
            const container = document.getElementById('positionInputs');
            container.innerHTML = '';
            
            for (let i = 0; i < currentLength; i++) {
                const wrapper = document.createElement('div');
                wrapper.className = 'flex flex-col items-center';
                
                const label = document.createElement('span');
                label.className = 'text-xs text-gray-500 mb-1';
                label.textContent = i + 1;
                
                const input = document.createElement('input');
                input.type = 'text';
                input.maxLength = 1;
                input.id = `position-${i}`;
                input.className = 'position-input w-12 h-14 text-center text-2xl font-bold border-2 border-gray-300 rounded-lg uppercase';
                input.placeholder = '?';
                input.value = positions[i];
                input.oninput = (e) => handlePositionChange(i, e.target.value);
                input.onkeydown = (e) => handleKeyDown(i, e);
                
                wrapper.appendChild(label);
                wrapper.appendChild(input);
                container.appendChild(wrapper);
            }
        }

        // Position √§ndern
        function handlePositionChange(index, value) {
            positions[index] = value.toUpperCase();
            document.getElementById(`position-${index}`).value = value.toUpperCase();
            
            if (value && index < currentLength - 1) {
                const nextInput = document.getElementById(`position-${index + 1}`);
                if (nextInput) nextInput.focus();
            }
            
            filterStamps();
        }

        // get Plate data algorithm       
        // ranges: irregular page lengths
        const ranges = [
          ["A1","A51"],  // 1
          ["A52","A101"],  // 2
          ["A102","B43"]   // 3
        ];
        
        // Normalize IDs: A1 ‚Üí A0010, A1* ‚Üí A0011
        function normalizeId(id) {
          const letter = id[0];
          const match = id.slice(1).match(/^(\d+)(\*)?$/);
          if (!match) return letter + "0000";
        
          const number = parseInt(match[1], 10);
          const suffix = match[2]; // "" or "*"
        
          let base = number * 10;
          if (suffix === "*") base += 1;
        
          return letter + String(base).padStart(4, "0");
        }
        
        // Precompute page map only for your stamps
        const pageMap = new Map();
        stamps.forEach(stamp => {
          const norm = normalizeId(stamp.id);
        
          for (let i = 0; i < ranges.length; i++) {
            const [start, end] = ranges[i];
            const startNorm = normalizeId(start);
            const endNorm = normalizeId(end);
        
            if (norm >= startNorm && norm <= endNorm) {
              pageMap.set(norm, i + 1);
              break; // found the page, no need to check further
            }
          }
        });
        
        // Main function: getPlate
        function getPlate(id) {
          return pageMap.get(normalizeId(id)) ?? null;
        }

        // Tastatur-Navigation
        function handleKeyDown(index, e) {
            if (e.key === 'Backspace' && !positions[index] && index > 0) {
                const prevInput = document.getElementById(`position-${index - 1}`);
                if (prevInput) prevInput.focus();
            }
        }

        // Umrahmungsfilter setzen
        function setFrameFilter(filter) {
            frameFilter = 'alle';
            filterStamps();
        }

        // Positionen zur√ºcksetzen
        function resetPositions() {
            positions = Array(10).fill("");
            updatePositionInputs();
            filterStamps();
        }

        // Alles zur√ºcksetzen
        function resetAll() {
            positions = Array(10).fill("");
            frameFilter = 'alle';
            setFrameFilter('alle');
            updatePositionInputs();
            filterStamps();
        }

        // Stempel filtern
        function filterStamps() {
            let filtered = stamps;
            
            // Nach Buchstaben filtern
            const hasPositions = positions.some(p => p !== "");
            if (hasPositions) {
                filtered = filtered.map(stamp => {
                    const result = positionMatch(stamp.text, positions, currentLength);
                    return { ...stamp, ...result };
                }).filter(s => s.matches);
                
                // Sortieren
                filtered.sort((a, b) => {
                    if (a.score !== b.score) return b.score - a.score;
                    if (a.containsScore !== b.containsScore) return b.containsScore - a.containsScore;
                    return 0;
                });
            }
            
            displayResults(filtered);
        }

        // Position Matching
        function positionMatch(text, positions, length) {
            const hasAnyPosition = positions.some(p => p !== "");
            if (!hasAnyPosition) return { matches: true, score: 0, matchCount: 0, positionMatchCount: 0 };
            
            let positionMatchCount = 0;
            let containsMatchCount = 0;
            let totalPositions = 0;
            
            const enteredChars = [];
            
            for (let i = 0; i < length && i < positions.length; i++) {
                if (positions[i] && positions[i] !== "") {
                    totalPositions++;
                    enteredChars.push({ char: positions[i].toUpperCase(), position: i });
                }
            }
            
            if (totalPositions === 0) return { matches: true, score: 0, matchCount: 0, positionMatchCount: 0 };
            
            for (let entry of enteredChars) {
                if (entry.position < text.length && text[entry.position] === entry.char) {
                    positionMatchCount++;
                    containsMatchCount++;
                } else if (text.includes(entry.char)) {
                    containsMatchCount++;
                }
            }
            
            const shouldShow = containsMatchCount > 0;
            const positionScore = positionMatchCount / totalPositions;
            const containsScore = containsMatchCount / totalPositions;
            
            return {
                matches: shouldShow,
                score: positionScore,
                containsScore: containsScore,
                matchCount: containsMatchCount,
                positionMatchCount: positionMatchCount,
                totalPositions: totalPositions
            };
        }

        // Ergebnisse anzeigen
        function displayResults(filtered) {
            const container = document.getElementById('results');
            const noResults = document.getElementById('noResults');
            const resultCount = document.getElementById('resultCount');
            const filterInfo = document.getElementById('filterInfo');
            
            container.innerHTML = "";
            
            if (filtered.length === 0) {
                container.classList.add('hidden');
                noResults.classList.remove('hidden');
            } else {
                container.classList.remove('hidden');
                noResults.classList.add('hidden');
                
                filtered.forEach(stamp => {
                    const card = createStampCard(stamp);
                    container.appendChild(card);
                });
            }
            
            resultCount.textContent = `${filtered.length} ${filtered.length === 1 ? 'Stempel gefunden' : 'Stempel gefunden'}`;
            
            filterInfo.textContent = "";
        }

        // Stempelkarte erstellen
        function createStampCard(stamp) {
            const card = document.createElement('div');
            card.className = 'bg-white rounded-xl shadow-lg hover:shadow-2xl transition-all duration-300 overflow-hidden cursor-pointer transform hover:-translate-y-1';
            card.onclick = () => openModal(stamp);
            
            let matchBadge = "";
            if (stamp.totalPositions > 0) {
                let badgeClass = 'bg-gray-200 text-gray-700';
                let badgeText = `${stamp.matchCount}/${stamp.totalPositions} enthalten`;
                
                if (stamp.positionMatchCount === stamp.totalPositions) {
                    badgeClass = 'bg-green-200 text-green-900';
                } else if (stamp.positionMatchCount > 0) {
                    badgeClass = 'bg-blue-200 text-blue-900';
                    badgeText = `${stamp.positionMatchCount} an richtiger Stelle ‚Ä¢ ${badgeText}`;
                }
                
                matchBadge = `<span class="text-xs px-2 py-1 rounded-full font-semibold ${badgeClass}">${badgeText}</span>`;
            }
            
            
            card.innerHTML = `
                <div class="bg-gradient-to-r from-amber-100 to-orange-100 p-4 border-b-2 border-amber-200">
                    <div class="flex justify-between items-center">
                        <span class="text-sm font-semibold text-amber-800">Katalog-Nr: ${stamp.id}</span>
                        <div class="flex items-center gap-2">
                            ${matchBadge}
                            <span class="text-xs bg-amber-200 text-amber-900 px-2 py-1 rounded-full">Platte ${getPlate(stamp.id)}</span>
                        </div>
                    </div>
                </div>
                <div class="p-6">
                    <div class="flex items-start gap-4">
                        <div class="flex-1">
                            <div class="text-xs text-gray-500 mb-1">Schriftzug:</div>
                            <div class="text-xl font-bold text-gray-800 tracking-wider font-samian break-words">${stamp.text}</div>
                            <div class="flex items-center gap-2 mt-2">
                                <div class="text-xs text-gray-500">L√§nge: ${stamp.text.length}</div>
                            </div>
                        </div>
                        <div class="flex-shrink-0 w-32 h-20 bg-gray-100 rounded-lg border-2 border-gray-200 overflow-hidden flex items-center justify-center prev-image-container">
                            <img src="img/${stamp.id.replace('*','a')}.png" class="w-full h-full object-contain" onerror="this.style.display='none'" />`;

            return card;
        }

        // Modal √∂ffnen
        function openModal(stamp) {
            document.getElementById('modalTitle').textContent = `Stempel ${stamp.id}`;
            document.getElementById('modalText').innerHTML = `Schriftzug: <span class="font-samian font-bold text-xl">${stamp.text}</span>`;
            document.getElementById('modalPlate').textContent = `Platte ${getPlate(stamp.id)}`;
            
            const modalImage = document.getElementById('modalImage');
            const placeholder = document.getElementById('modalPlaceholder');
            
            if (stampImages[stamp.id]) {
                modalImage.src = stampImages[stamp.id];
                modalImage.classList.remove('hidden');
                placeholder.classList.add('hidden');
            } else {
                modalImage.classList.add('hidden');
                placeholder.classList.remove('hidden');
            }
            
            document.getElementById('imageModal').classList.remove('hidden');
        }

        // Modal schlie√üen
        function closeModal() {
            document.getElementById('imageModal').classList.add('hidden');
        }

        // Start
        init();
    </script>
</body>
</html>
